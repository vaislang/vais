# Cargo-tarpaulin configuration for test coverage reporting
# Reference: https://github.com/xd009642/tarpaulin

[coverage]
# Timeout for the entire coverage process (in seconds)
timeout = 300

# Output formats: Stdout, Xml, Html, Lcov
# Multiple formats can be specified
out = ["Stdout", "Html", "Lcov"]

# Output directory for coverage reports
output-dir = "target/coverage"

# Exclude files from coverage analysis
exclude-files = [
    "benches/*",
    "examples/*",
    "tests/*",
]

# Exclude packages from coverage
exclude = [
    "vais-benches",
]

# Ignore panics during execution
ignore-panics = true

# Ignore tests
ignore-tests = false

# Count lines of code
count = true

# Work with multiple packages
workspace = true

# Attempt to run code as a library instead of as an executable
lib = true

# Run binary targets
bins = true

# Run example targets
examples = false

# Run test targets
tests = true

# Use colored output
color = "Auto"

# Fail if coverage falls below threshold (percentage)
# Goal: 80%+ code coverage for production quality
fail-under = 80

# Parallel execution (disabled for stability)
parallel = false

# Precise reporting (line-level granularity)
precise = true

# Dump coverage report as follows:
verbose = true

# Run release builds (disabled for better coverage tracking)
release = false

# Test only this package (empty = all workspace packages)
packages = []

# Follow dependencies
follow-exec = true

# Include all features
all-features = false

# Exclude specific crates with low priority for initial coverage
# These are typically experimental or non-critical packages
exclude-packages = [
    "vais-playground-server",
    "vais-registry-server",
    "vais-python",
]

# Coverage reporting options
# Generate reports showing:
# - Line coverage
# - Branch coverage (if available)
# - Function coverage
