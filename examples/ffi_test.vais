# FFI Test - extern blocks and varargs

# Extern block with C ABI
N "C" {
    F puts(s: *i8) -> i32;
    F printf(fmt: *i8, ...) -> i32;
    F malloc(size: i64) -> *i8;
    F free(ptr: *i8) -> ();
}

# repr(C) struct for FFI
#[repr(C)]
S Point {
    x: i64,
    y: i64
}

# Helper function
F add(a: i64, b: i64) -> i64 = a + b

# Main function using FFI
F main() -> i64 {
    # Test extern function call
    puts("Hello from FFI!")

    # Test varargs function
    printf("Numbers: %ld %ld\n", 42, 100)

    # Test regular function call
    result := add(10, 20)
    printf("Result: %ld\n", result)

    # Test repr(C) struct
    point := Point { x: 5, y: 10 }
    printf("Point: (%ld, %ld)\n", point.x, point.y)

    0
}
