# Simple test for Option/Result error handling improvements

U std/vec
U std/hashmap
U std/option

F main() -> i64 {
    puts("Testing Option/Result improvements")

    # Test Vec with Option
    v := vec_new()
    v.push(10)
    v.push(20)
    v.push(30)

    result := v.get_opt(1)
    M result {
        Some(_) => puts("Vec get_opt(1) = Some"),
        None => puts("Vec get_opt(1) = None")
    }

    result2 := v.get_opt(99)
    M result2 {
        None => puts("Out of bounds returns None"),
        Some(_) => puts("Unexpected Some value")
    }

    pop_val := v.pop_opt()
    M pop_val {
        Some(_) => puts("Vec pop_opt = Some"),
        None => puts("Vec pop_opt = None")
    }

    v.drop()

    # Test HashMap with Option
    map := hashmap_new()
    map.set(5, 500)

    map_result := map.get_opt(5)
    M map_result {
        Some(_) => puts("HashMap get_opt(5) = Some"),
        None => puts("HashMap get_opt(5) = None")
    }

    map_result2 := map.get_opt(999)
    M map_result2 {
        None => puts("Key not found returns None"),
        Some(_) => puts("Unexpected Some value")
    }

    map.drop()

    puts("Tests completed")
    0
}
