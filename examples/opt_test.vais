# Optimization test

F constant_fold_test() -> i64 {
    # These should be folded at compile time
    a := 10 + 20
    b := a * 2
    b
}

F strength_reduce_test(x: i64) -> i64 {
    # Multiply by power of 2 - should become shift
    y := x * 8
    # Divide by power of 2 - should become shift
    z := y / 4
    z
}

F main() -> i64 {
    puts("Testing optimizations:")

    r1 := constant_fold_test()
    puts("constant_fold_test() =")
    putchar(r1 / 10 + 48)
    putchar(r1 % 10 + 48)
    putchar(10)

    r2 := strength_reduce_test(10)
    puts("strength_reduce_test(10) =")
    putchar(r2 / 10 + 48)
    putchar(r2 % 10 + 48)
    putchar(10)

    0
}
