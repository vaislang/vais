# Test memory operations: load_byte, store_byte, load_i64, store_i64
F test_memory(x: i64) -> i64 {
    # Allocate memory
    buf := malloc(32)
    
    # Test store_byte and load_byte
    store_byte(buf, 65)       # 'A' = 65
    store_byte(buf + 1, 66)   # 'B' = 66
    store_byte(buf + 2, 67)   # 'C' = 67
    store_byte(buf + 3, 0)    # null terminator
    
    a := load_byte(buf)       # should be 65
    b := load_byte(buf + 1)   # should be 66
    c := load_byte(buf + 2)   # should be 67
    
    # Test store_i64 and load_i64
    store_i64(buf + 8, 12345)
    store_i64(buf + 16, 67890)
    
    val1 := load_i64(buf + 8)   # should be 12345
    val2 := load_i64(buf + 16)  # should be 67890
    
    # Print each character
    putchar(a)  # A
    putchar(b)  # B
    putchar(c)  # C
    putchar(10) # newline
    
    free(buf)
    
    # Verify values: a=65, b=66, c=67, val1=12345, val2=67890
    # Sum = 80433
    I a == 65 && b == 66 && c == 67 && val1 == 12345 && val2 == 67890 {
        0  # Success
    } E {
        1  # Failure
    }
}

F main(n: i64) -> i64 {
    test_memory(0)
}
