# Test file for index expression implementation
# Tests array indexing with the new parser and codegen

# Test 1: Basic array indexing
F test_basic_index(arr: *i64, idx: i64) -> i64 {
    arr[idx]
}

# Test 2: Nested indexing in expressions
F test_expression_index(arr: *i64) -> i64 {
    arr[0] + arr[1] + arr[2]
}

# Test 3: Index as function argument
F get_element(arr: *i64, i: i64) -> i64 = arr[i]

F main() -> i64 {
    # Create test array using array literal
    arr: *i64 = [10, 20, 30, 40, 50]

    # Test basic indexing
    val0 := test_basic_index(arr, 0)  # Should be 10
    val2 := test_basic_index(arr, 2)  # Should be 30

    # Test expression indexing
    sum := test_expression_index(arr)  # Should be 60

    # Test as function expression
    val4 := get_element(arr, 4)  # Should be 50

    # Return sum of all test values (should be 10 + 30 + 60 + 50 = 150)
    val0 + val2 + sum + val4
}
